# 2026-01-29 - Job Curator Bot v2.2 Fixes + Memory Architecture

## Critical Fixes Completed

### 1. Telegram Posting - WORKING ‚úÖ (14:52 UTC)
- **Method:** Direct Telegram API (not clawdbot message send)
- **Group:** `-1003378765936` (VAGAS REMOTAS $ ‚Ç¨ FREE)
- **Bot token:** `<redacted-token>`
- **Test result:** 3/3 vagas postadas com sucesso
- **Key:** Request direto ao Telegram API via requests library

### 2. Memory Architecture Fixed (14:41 UTC)
**Problem:** Mestre said "5 vezes voc√™ esquece" o grupo ID
**Solution:** Comprehensive storage em MEMORY.md:
- Full Telegram config (IDs, tokens, chat setup)
- Clawdbot dual-profile (Haiku + Opus isolado)
- job-curator-bot structure (post_job.py, run_locked.sh, cron)
- Nunca mais esquecer

### 3. URL Problem Identified (14:57 UTC)
**Issue:** Todos links eram `boards.greenhouse.io` ‚Üí parecia patroc√≠nio
**Root cause:** Usando Greenhouse/Lever API direto
**Correct strategy:** RSS feeds ‚Üí resolve para site oficial ‚Üí postar com link oficias
- Exemplo: SlideSpeak (RSS) ‚Üí https://slidespeak.io/careers (n√£o boards.greenhouse.io)

## Current State

**job-curator-bot (old - /projects/):**
- ‚úÖ Telegram posting funcional (post_job.py via API direto)
- ‚úÖ Cron: 5x/dia (09/12/15/18/21 BRT)
- ‚úÖ run_locked.sh: Corrigido (sem duplica√ß√£o, sem permiss√£o, sem bin√°rio quebrado)
- ‚úÖ Sonnet: Removido (s√≥ em backups)

**job-curator-bot v2.2 (new - /clawd/scripts/):**
- ‚úÖ Pesquisa: RSS feeds (WWR) ‚Üí 10 vagas em 1.5s, $0
- ‚úÖ Claude an√°lise: 1 batch call
- ‚úÖ Valida√ß√£o: Diversidade garantida
- ‚úÖ Posting: Telegram API direto
- ‚ö†Ô∏è **ISSUE:** Todos links Greenhouse ‚Üí precisa resolver para site oficial

## Next Step (n√£o executado ainda)

Mudar `job_sources_free.py`:
1. Remove: Greenhouse/Lever direct APIs
2. Keeps: RSS feeds (WWR, RemoteOK)
3. Adds: Resolve cada vaga para site oficial
4. Result: Links tipo `amazon.com/jobs`, n√£o `boards.greenhouse.io`

## Clawdbot Setup (final)

**Padr√£o (produ√ß√£o):**
```bash
clawdbot models set google/gemini-2.5-flash-lite
clawdbot models fallbacks set --clear
```

**Opus (isolado, tarefas pesadas):**
```bash
clawdbot --profile opus setup
clawdbot --profile opus models set google/gemini-2.5-flash-lite
```

Sempre use: `clawdbot --profile opus agent --local --session-id novo`

## Files Modified Today

1. `/home/ubuntu/clawd/MEMORY.md` ‚Äî Armazenou config completa (IDs, Clawdbot, job-curator)
2. `/home/ubuntu/clawd/scripts/job-curator/main_free.py` ‚Äî Added dotenv loader
3. `/home/ubuntu/clawd/scripts/job-curator/telegram_poster.py` ‚Äî Changed to post_via_telegram_api
4. `/home/ubuntu/clawd/scripts/job-curator/job_sources_free.py` ‚Äî Commented Greenhouse/Lever (prep for next fix)

## Time Spent

- 14:41 UTC: Memory architecture fixed
- 14:52 UTC: Telegram posting working
- 14:57 UTC: URL strategy corrected
- Cron operative: 5 posts/day

## Work Status

‚úÖ **Done:** Telegram posting, memory storage, rate limits OK
üîÑ **In Progress:** URL resolution (RSS ‚Üí official sites)
‚è≥ **Next:** Test new job_sources with resolved URLs
